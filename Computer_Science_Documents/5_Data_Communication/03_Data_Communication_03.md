# 데이터 통신 정리3[다중화기, 전송 제어, HDLC]
## 통신 속도와 통신 용량
통신 속도의 종류로는 변조 속도, 신호 속도, 전송 속도, 베어러 속도 4가지로 나뉜다.
- 변조 속도 : 1초 동안 **몇 개의 신호 변화**가 있는가를 나타내는 단위. Baud(보오) 단위를 이용한다.
- 신호 속도 : 1초 동안 **전송 가능한 비트 수**로 bps 단위를 이용한다.
- 전송 속도 : 단위 시간에 전송되는 데이터의 양(문자, 블록, 비트, 단어 etc.)
- 베어러 속도 : 데이터 신호에 동기 문자, 상태 신호 등을 합한 속도로 단위는 bps를 이용한다.

## 다중화기(Multiplexer)
- 하나의 통신 회선에 **여러 대의 단말기**가 접속하여 사용하도록 한 장치.
- Multiplexing은 하나의 통신 회선을 다수의 단말기가 공유할 수 있도록 하는 개념. 다중화기, 집중화기, 공동 이용기 등으로 나뉜다.
- 고속 통신 회선의 주파수나 시간을 일정한 간격으로 나뉘어 각 단말기에 할당하는 방식으로 운영.
- **통신 회선을 공유**하여 전송 효율 향상, 통신 회선의 수와 설치 비용을 줄인다.
- 다중화기는 크게 **주파수 분할 다중화기**, **시분할 다중화기**로 구분된다.

## 주파수 분할 다중화기(FDM)
> Analog 신호 전송에서 많이 접목한다.
- 통신 회선의 **주파수**를 여러 개로 분할하여 여러 대 단말 장치가 동시에 사용할 수 있도록 한다.
- 전송 신호에 필요한 대역폭보다 **통신 회선의 유효 대역폭**이 큰 경우 사용한다.
- 다중화기 자체 내부에 변/복조 기능이 내장 되어 있다.
- 구조가 간단하고 가격이 저렴한 편.
- 대역폭을 나누되 각 채널들 간 상호 간접을 방지하기 위해 **보호 대역**(Guard Band)도 필요함.
- **저속의 비동기식 전송, 멀티 포인트 방식** 등의 신호에 적합함.

## 시분할 다중화기(TDM)
> Digital 신호 전송에서 많이 접목한다.
- 통신 회선의 대역폭을 **일정한 시간 폭(Time Slot)**으로 나뉘어 여러 대 단말장치가 동시에 사용할 수 있도록 함.
- 다중화기의 내부 속도와 단말 장치 속도 Difference를 보완하기 위해 **Buffer** 장착은 필수다.
- 크게 동기식 시분할 다중화기와 비동기식 시분화 다중화기로 나뉘게 된다.

> ### 동기식 시분할 다중화기(STDM)
> - 모든 단말 장치에 고정된 시간 폭을 제공한다.
> - 전송되는 데이터 시간 폭을 정확히 맞추기 위해 동기 비트도 필수.
> - 전송할 데이터가 없는데 일정한 시간 폭(Time Slot)이 제공되는 면에서는 효율성이 떨어진다.
> - 송신 측에서 입력된 데이터를 채널 별로 분리하고 각 채널 `Buffer`에 저장하고 이를 순차적으로 전송한다.
> - 다중화된 회선의 데이터 전송률 = Σ(각 접속 장치들의 데이터 전송률)

> ### 비동기식 시분할 다중화기(ATDM)
>> A.K.A. 지능 시분할 다중화기, 통계적 시분할 다중화기 등으로 칭한다.
> - 전송할 데이터가 있는 단말장치에만 시간 폭을 제공을 하여 전송 효율 향상.
> - 동기식 시분할 다중화기 보다 많은 수의 단말기들이 전송 매체에 접목 가능한 장점이 있지만 접속 소요 시간이 긴 편이다.
> - 데이터 전송량이 많아지면 전송 지연도 일어난다.
> - 주소 제어, 흐름 제어, 오류 제어 등의 기능을 하여 복잡한 제어 회로와 임시 기억 장치도 필요해서 가격이 비싼 편이다.
> - 다중화된 회선의 데이터 전송률 < Σ(각 접속 장치들의 데이터 전송률)

* * *

## 전송 제어
> OSI 참조 모델에서 2단계에 해당하는 **데이터 링크 계층**에서 수행을 한다.
- 데이터의 원활한 흐름을 위해 입/출력 제어, 회선 제어, 동기 제어, 오류 제어, 흐름 제어 등을 수행한다.
- 전송 제어의 절차
> 1. 데이터 통신 회선 접속
> 2. 데이터 링크 확립
> 3. 정보 메시지 전송
> 4. 데이터 링크 종결 
> 5. 데이터 통신 회선 절단
- **통신 회선 과정**에서는 단말기에 물리적으로 접속을 하거나 분리를 하는 과정.
- **데이터 링크 설정**에서는 논리적 경로에 대해서 구성을 하거나 해제하는 과정.
- **전송 과정**에서는 데이터를 수신 측에 전송하고 오류 제어와 순서 제어를 수행하는 과정.

## 전송 제어 문자
- SYN(SYNchronous Idle) : 문자 동기
- SOT(Start Of Heading) : 헤딩 시작
- STX(Start of TeXt) : 헤딩 종료 이후 본문 시작
- ETX(End of TeXt) : 본문 종료
- ETB(End of Transmission Block) : 블록의 종료
- EOT(End Of Transmission) : 전송 종료 및 데이터 링크 해제
- ENQ(ENQuiry) : 상대편에 데이터 링크 설정 및 응답 요구
- DLE(Data Link Escape) : 전송 제어 문자임을 알린다.
- ACK(ACKnowledge) : 수신된 메시지에 대해 긍정적인 응답.
- NAK(Negative AcKnowledge) : 수신된 메시지에 대해 부정적인 응답.

* * *

## HDLC(High-Level Data Link Control)
> 정보처리기사 데이터통신 과목의 단골 손님
- **Bit 위주 프로토콜**로 각 프레임에 데이터 흐름을 제어하고 오류를 검출할 수 있는 Bit 열을 삽입하여 전송.
- 포인트 투 포인트(P2P), 멀티 포인트, 루프 방식 모두 적용.
- 단방향, 반이중, 전이중 통신 모두 지원. **동기 전송 방식**을 사용한다.
- 오류 제어에는 Go-Back-N, 선택적 재전송(Selective Repeat) ARQ를 이용한다.
- 흐름 제어에는 Slidin' Window(슬라이딩 윈도우)를 접목.
- 전송 제어 상 제한을 받지 않고 자유롭게 비트 정보를 전송하는 개념인 비트 투과성(투명성)을 접목.
- 비트 투과성을 보장하기 위해서 비트 스터핑을 활용한다.
- Bit Stuffing(비트 스터핑) : Flag를 제외하고 모든 비트에 연속적으로 5개의 1이 입력된다면 6번째에는 0을 강제로 추가하는 개념.
- Flag는 1이 연속으로 6개를 담고 있으며, 7개 이상의 1이 연속으로 입력되면 오류 프레임으로 인식을 한다.
- 전송 효율과 신뢰성이 높은 편.

## 대표적인 HDLC Frame의 구조
> 비트의 수는 대개 8비트로 구성이 되지만, **정보부는 임의로 달라지고, FCS는 16/32비트를 적용**한다.

플래그(Flag) | 주소부(Address Field) | 제어부(Control Field) | 정보부(Information Field) | FCS | 플래그(Flag)
------------ | ------------- | ------------- | ------------- | ------------- | -------------
- Flag : 프레임의 시작과 끝을 나타냄. 비트 패턴은 (01111110)(2)로 각 통화로의 혼선을 방지함.
- 주소부(Address Field) : 송-수신국을 식별하기 위해 사용. 다수에게 전송하는 방송용은 (11111111)(2), 시스템에 의해 임의로 수신국이 지정되는 실험용은 (00000000)(2).
- 제어부(Control Field) : 프레임의 종류를 식별하기 위해 사용. 제어부의 1st, 2nd 비트를 사용함.
- 정보부(Information Field) : 실제 정보 메시지가 들어 있는 부분.
- FCS(프레임 검사 순서 필드) : 프레임 내용에 대한 오류 검출을 위한 부분. 일반적으로 CRC 코드를 적용한다.

## HDLC Frame 종류와 데이터 전송 모드
### HDLC Frame 종류
- Information Frame(정보 프레임) : 제어부가 0으로 시작을 하고, 사용자가 데이터를 전달하거나 피기백킹 기법을 통해 데이터에 대한 확인 응답을 보낼 때 적용.
> **PiggyBackin'**
> Piggy Back은 돼지 꼬리의 뜻인데 수신 측으로 향하는 데이터 프레임에 확인(ACK) 응답을 포함시켜 전송하는 것을 뜻한다.
- Supervisor Frame(감시 프레임) : 제어부가 10으로 시작하고, 오류 제어와 흐름 제어를 위해 적용.
- Unnumbered Frame(비번호 프레임) : 제어부가 11로 시작하고 링크의 동작 모드 설정과 관리, 오류 회복을 수행을 한다. 
### 데이터 전송 모드
데이터 전송 모드는 제어부에 Unnumbered Frame(비번호 프레임)에 의해 결정이 된다.
- 표준[정규] 응답 모드(`NRM`) : 반이중 통신을 하는 P2P(Point to Point) 또는 멀티 포인트 불균형 링크 구성에 적용을 하는데 종국(Secondary Station)이 주국(Main Station)의 허가가 있을 때만 송신을 하는데 Poll을 전달해야 한다.
- 비동기 응답 모드(`ARM`) : 전이중 통신을 하는 P2P 불균형 링크 구성에 사용을 하는데 종국은 주국의 허가 없이도 송신이 가능하지만, 링크 설정이나 오류 복구 등의 제어는 주국이 담당한다.
- 비동기 균형 모드(`ABM`) : 전이중 통신을 하는 P2P 균형 링크에서 사용을 하는데 혼합국(Collaboration Station)끼리 허가 없이 언제나 전송이 가능하다.

## 회선 제어 방식
> ### 경쟁(Contention) 방식
> - 회선 접속을 위해 서로 경쟁을 하는 방식.
> - 송신 요구를 먼저 한 쪽이 송신권을 가지게 된다.
> - P2P에서 주로 이용을 한다.
> - 정보 전송이 종료 되기 전까진 데이터 링크의 종결이 이루어지지 않고 독점적으로 정보를 전송하여 선점 개념과 같음.

> ### Polling 방식
> - 주 컴퓨터가 단말기에게 전송할 데이터 유무에 대해 묻고 있다면 Poll(허가)를 하는 방식.

> ### Selection 방식
> - 단말기로 전송할 데이터가 있는 경우 타 단말기가 받을 준비가 되었는가를 묻고 준비가 되면 주 컴퓨터에서 단말기로 데이터를 전송하는 방식. 소개팅과 같은 개념으로 인식하면 됨.

> Polling, Selection 방식의 공통점은 주 컴퓨터에서 송/수신 제어권을 가지고 있는 방식으로 트래픽이 많은 **멀티 포인트** 방식에서 많이 이용한다.
