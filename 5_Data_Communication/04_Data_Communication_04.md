# 데이터 통신 정리4[오류 제어, 검사, 회선 교환, 축적 교환]
## 오류의 발생 원인
- 감쇠 : **거리**에 따라서 전송 매체 통과 과정이 미약해짐.
- 지연 왜곡 : 전송 매체를 통해 여러 신호를 전파할 때 **부지기수한 주파수**에 따라서 속도가 달라짐.
- 상호 변조 잡음 : 서로 다른 주파수 간의 **합이나 차**로 인해 새로운 주파수가 생성되는 잡음.
- 누화 잡음(혼선) : 인접한 전송 매체의 **전자기적 상호 유도 작용**으로 인하여 생긴 잡음으로 전화 중에 다른 사람의 통화 내용도 들리는 현상과 같다.
- 충격성 잡음 : 전송 매체에 **외부적인 충격이나 기계적인 충격**에 의해 생기는 잡음.
- 시스템적 왜곡 : 전송 매체에 언제든지 일어날 수 있는 왜곡으로 손실, 감쇠, 신호와 감쇠 진폭에 따라 달라지는 하모닉 왜곡 등이 있다.

## 전송 오류 제어 방식
> ### 전진 오류 수정(`FEC`)
> - 재전송 요구 없이 수신 측에서 스스로 오류 검출과 수정을 함.
> - 역채널 그런 거 없고, 연속적인 데이터 흐름이 가능하다.
> - 데이터 비트 이외에 오류 검출 / 수정을 위한 비트도 추가되어 전송 효율은 그닥 안 좋다.
> - **해밍 코드, 상승 코드** 방식이 있다.

> ### 후진 오류 수정(`BEC`)
> - 데이터 전송 과정에서 오류가 발생하면 송신 측에 재전송을 요구하는 방식
> - **패리티 검사, CRC, Block Sum** 등을 사용해 오류 검출하고, 오류 제어에 대해서는 ARQ(자동 반복 요청)에 의해 이뤄진다.

## 자동 반복 요청(`ARQ`)
오류가 발생한다면 송신 측에 통보를 하고 송신 측에서는 오류 발생 블록을 재전송을 하는 모든 절차를 의미한다.
> ### Stop & Wait(정지-대기) ARQ
> - 송신 측에서 한 개의 블록을 전송하고 수신 측으로 부터 응답을 대기한다.
> - 구현 방법은 단순한데 전송 효율은 보장하지 못한다.

> ### Continuous(연속) ARQ
> - 연속적으로 데이터 블록을 보내는 방식.
> - Go-Back-N ARQ : 오류가 발생한 블록 이후 모든 블록을 재전송한다.
> - Selective Repeat ARQ : 오류가 발생한 블록**만** 재전송을 하는 방식으로 수신 측에서는 데이터 처리 전에 원래 순서대로 조립을 해야 되어 더 복잡한 버퍼가 필요하다.

> ### Adaptive(적응) ARQ
> - 데이터 블록 길이를 채널 상태에 따라 동적으로 변경하는 방식.
> - 제어 회로가 꽤 복잡해지고 비용도 많이 들어 거의 사용하지 않는다.

## 오류 검출 방식
오류 검출 방식은 크게 전진 오류 수정에서 해밍 코드, 상승 코드로 나뉘고 후진 오류 수정에서 패리티 검사, 순환 중복 검사(CRC)로 나뉘게 된다.

> ### 해밍 코드
> - 수신 측에서 오류가 발생한 비트를 검출 후 직접 수정하는 방식
> - 1비트의 오류만 수정이 가능해 정보 비트 이외에 잉여 비트도 필수.
> - 전송 비트 중 1, 2, 4, 8, 16... 2^n번째 비트를 오류 검출을 위한 패리티 비트로 적용.
> - 해밍 거리는 송신 비트와 수신 비트 중에서 **서로 다른 비트의 수**
> - 정정 가능한 최대 오류의 수로는 아래와 같이 계산이 된다.
>> dmin >= 2tc + 1 (dmin : 최소 해밍 거리, tc : 정정 가능 오류 수)

> ### 상승 코드
> - 순차적 디코딩과 한계값 디코딩을 사용해 오류를 수정하는데 여러 비트의 오류를 수정할 수 있다.

> ### 패리티 검사
> - 전송 비트에 1비트 검사 비트인 Parity Bit를 추가해 오류 검출.
> - 간단한 방식인데 2개의 비트에 동시에 오류가 발생하면 검출 불가.
> - 오류를 검출**만 할 수 있고**, 수정은 못 한다.
> - 홀수/짝수 수직 패리티 체크를 대부분 이용함.
> - 짝수 수직 패리티 검사를 블록 합(Block Sum) 검사라고도 한다.

> ### 순환 중복 검사(CRC)
> - 다항식 코드를 이용해 오류를 검출함.
> - **동기식 전송**에서 주로 사용한다.
> - HDLC 프레임에서 FCS를 만드는데 적용을 한다.
> - 집단 오류를 검출할 수 있고 검출률이 높아 많이 이용한다.

* * * 

## 회선 교환 방식
- 통신을 원하는 두 지점을 Router를 이용해 물리적으로 접속시키는 방식.
- 데이터 전송 전에 먼저 **물리적 통신 회선**을 통한 연결 필수.
- 접속이 되면 그 통신 회선은 전용 회선에 의한 통신처럼 데이터가 전달되고 이를 **고정 대역 전송**을 기반으로 이용한다.
- 접속에는 긴 시간은 소요 되지만 Router 내에서 전송 지연이 거의 없다 싶어서 실시간 전송에 무리가 없다.
- 데이터 전송에 필요한 전체 시간은 축적 시간보다는 길다.
- 데이터가 전송되지 않더라도 **접속이 유지되어 있기 때문에** 데이터 전송이 드문 경우에는 무용지물.
- 일정한 데이터 전송률을 제공하고 동일한 전송 속도 유지함.
- 전송 데이터의 오류 제어나 흐름 제어는 **사용자**에 의해 수행 된다.
- 데이터 전송 전에 미리 연결된 물리적 통신 회선을 통해 데이터가 순차적으로 전달이 되어 수신 Node에서 패킷을 재순서화 할 필요는 없다.
- 회선 교환의 방식은 크게 **공간 분할 교환 방식, 시분할 교환 방식** 2가지로 크게 나뉘게 된다. 
    - 참고로 시분할 교환 방식에는 TDM 버스 교환 방식, 타임 슬롯 교환 방식, 시간 다중화 교환 방식이 존재한다.
- 참고로 통신 과정은 링크 설정 -> 데이터 전송 -> 링크 해제인 사실은 이미 인지하고 있을 것이다.


> ### 제어 신호 방식
> - 감시 제어 신호 : 상대방과 통화 할 시 필요한 자원을 이용할 수 있는가에 대해 결정하고 알리는 데 이용하는 신호.
> - 주소 제어 신호 : 상대방을 식별하고 경로를 배정하여 전화를 울리게 함.
> - 링크 제어 신호 : 신호음, 연결음, 통화중 등 호의 상태 정보를 송신자에게 제공하는 역할 수행.
> - 망 관리 제어 신호 : 통신망의 전체적인 운영, 유지, 고장 수리 etc를 위해 사용.

## 축적 교환 방식
송신기 측에서 전송한 데이터를 송신 측 Router에 저장 시켰다가 이를 다시 적절한 통신 경로를 선택하여 수신 측 터미널에 전송하는 방식. **메시지 교환 방식, 패킷 교환 방식** 2가지가 존재한다.
> ### 메시지 교환 방식
>> 쉽게 생각하면 옛날 전화번호부에 전화번호를 추가하는 방법과 같다고 생각을 하면 되겠다.
> - Router가 일단 송신 측 메시지를 받아서 저장한 후 전송 순서가 되면 수신 측으로 전송하는 방식
> - 각 메시지마다 전송 경로를 결정하고, 수신 측 주소를 붙어서 전송함.
> - 전송 메시지는 추후 검색 및 속도나 코드 변환이 가능은 하다.
> - 전송 지연 시간이 매우 길어서 대화형 데이터 전송을 이용을 하기에는 부적합하다.

> ### 패킷 교환 방식
>> 패킷(Packet) : 전송 혹은 다중화를 목적으로 메시지를 일정한 비트 수로 분할하여 송/수신 측 주소와 제어 정보 등을 부가하여 만든 데이터 블록. 쉽게 생각하면 요즘 나오는 지역 별 배달 음식집 책자와 같은 원리.
> - 메시지를 일정한 길이의 패킷으로 잘라서 전송을 하는 방식.
> - 패킷 교환망은 OSI 참조 모델의 **네트워크 계층**에 해당.
> - 회선 이용률이 매우 높음.
> - 수신 측에서 분할된 패킷을 재조립함.
> - 응답 시간이 빨라서 대화형 데이터 전송에 적합함.
> - **가상 회선 방식, 데이터그램 방식**이 존재함.
> - 전송에 실패한 패킷의 경우 재전송은 물론 가능함.
> - 데이터 전송 속도 조절이나 코드 변환도 물론 가능함.
> - 패킷 단위로 **헤더를 추가하여 패킷 오버헤드는 발생**함.
> - 대표적으로 가상 회선 패킷 교환 방식에서 모든 패킷을 전송하고 다음 확립된 접속을 끝내기 위해 마지막으로 전송하는 패킷의 개념인 Clear Request Packet을 살펴 볼 수 있다.
> - 패킷 조립 및 분해 기능이 없는 비패킷형 단말기는 PAD(Packet Assembler / Disassembler) 어댑터에 의해 패킷 조립 및 분해가 이뤄진다.

## 패킷 교환 방식의 종류

**패킷의 보내는 순서는 중요하지 않다. 그러나 송-수신 순서는 달라질 수도 있다.**

> ### 가상 회선 방식
> - 단말기 상호 간 논리적인 가상 통신 회선을 미리 설정하여 송신지와 수신지 사이 연결을 확립한 후에 설정된 경로를 따라 패킷 순서대로 운반하는 방식.
> - 통신이 이뤄지는 컴퓨터 사이에 데이터 전송의 안정 신뢰성은 보장된다.
> - 패킷의 송-수신 순서는 같다. 또한 통신 과정은 Call을 요청하고 데이터를 전송하고 Call을 해제하면 된다.

> ### 데이터그램 방식
> - 연결 경로를 설정하지 않고 인접한 노드들이 트래픽 상황을 감안하여 각 패킷들을 순서에 상관 없이 독립적으로 운반하는 방식.
> - 패킷마다 전송 경로가 달라서 송-수신 순서는 다를 수가 있다.
> - 소수의 패킷으로 구성된 짧은 데이터 전송에 적합하다.

## 패킷 교환망의 기능
- 패킷 다중화 : 동시에 다수의 상대 터미널과 통신을 수행할 수 있도록 하는 기능.
- > ### 경로 제어(Routing)
  > - 가장 효율적인 전송로를 선택하는 기능.
  > - 송-수신 측 간의 전송 경로 중에서 최적의 패킷 교환 경로를 설정하는 기능이다.
  > - 경로 설정 요소 : 성능 기준, 경로의 결정 시간과 장소, 정보 발생지, 경로 정보의 갱신 시간
  > #### 자율 시스템(AS) 내 현존하는 라우팅 종류
  > - `IGP` : 하나의 자율 시스템(AS) 내 라우팅에서 사용되는 프로토콜. 규모에 따라서 `RIP`, `OSPF` 2가지로 나뉜다.
  > - `RIP` : 소규모 동종 네트워크 내에서 효율적인 방법으로 최대 홉 수를 15로 제한한다.
  > - `OSPF` : 홉 수에 제한 없고 대규모 네트워크에서 많이 사용되는 프로토콜로 라우팅 정보에 변화가 있을 때 변환된 정보만 네트워크 내의 모든 라우터에게 알림.
  > - `EGP` : 자율 시스템(AS) 간의 라우팅. 게이트웨이 간의 라우팅에 사용되는 프로토콜. 
  > - `BGP` : 자울 시스템(AS) 간의 라우팅 프로토콜로 `EGP`의 단범을 보완하기 위해 만들었음. 전체 경로 제어표기를 교환하는 것이 초기 방안이지만 현재는 변화된 정보만을 교환한다.
  > #### 경로 설정 방식
  > - 고정 경로 제어(Static Routing) : 네트워크 내 모든 쌍에서 경로를 미리 정하는 방식
  > - 적응 경로 제어(Adaptive Routing) : 전송 경로를 동적으로 결정하는 방식
  > - 범람 경로 제어(Flooding) : 네트워크 전송을 요구하지 않고 송-수신처 사이에 존재하는 모든 경로를 패킷에 전송.
  > - 임의 경로 제어(Random Routing) : 인접하는 교환기 중 하나를 임의 선택해 전송하는 방식  
- > ### 트래픽 제어(Traffic Control)
  > - 전송되는 패킷의 흐름 또는 양을 조절하기 위해 **교착 상태**의 방지, 흐름 제어 등을 수행.
  > #### 흐름 제어(Flow Control)
  > 네트워크 보호, 성능 유지, 네트워크 자원의 효율적인 이용을 위해 전송되는 패킷의 흐름과 양을 조정하는 기능이다.
  > - Stop-and-Wait(정지-대기) : 수신 측의 확인 신호(ACK)를 받은 후에 다음 패킷으로 전송하는 방식. 한 번에 1개의 패킷만 전송 가능.
  > - Slidin' Window(슬라이딩 윈도우) : 수신 측의 신호를 받지 않더라도 미리 정해진 패킷의 수 만큼 연속적으로 전송하는 방식으로 한 번에 여러 패킷을 전송할 수 있어 전송 효율이 좋다. **윈도우 크기(Window Size)**는 수신 측의 ACK 신호 없이도 전송할 수 있는 패킷 수로 이는 언제든지 달라질 수 있다.
  > #### 폭주 제어
  > 네트워크 내의 패킷 수를 조절하여 네트워크와 오버플로를 방지하는 기능을 한다.
  > #### 교착 상태 방지
  > 패킷이 같은 목적지를 갖지 않도록 할당하고 교착 상태 발생 시에 교착 상태에 있는 한 단말장치를 선택하여 패킷 버퍼를 폐기한다.
- 논리 채널 : 송-수신 측 단말기 사이에서 논리 채널(가상 채널)을 설정하는 기능.

- 오류 제어 : 오류를 검출하고 정정하는 기능.

